"""
–ú–æ–¥—É–ª—å –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ñ–µ—Ä.
"""

from typing import Dict, Optional, TypedDict


class SphereEmoji(TypedDict):
    """–¢–∏–ø –¥–ª—è —ç–º–æ–¥–∑–∏ —Å—Ñ–µ—Ä."""

    emoji: str
    name: str


class NormalizedSphere(TypedDict):
    """–¢–∏–ø –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ñ–µ—Ä."""

    key: str
    name: str


class SphereNormalizer:
    """–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏–π —Å—Ñ–µ—Ä."""

    def __init__(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä–∞."""
        self._sphere_emojis: Dict[str, str] = {
            "üíñ": "–û—Ç–Ω–æ—à–µ–Ω–∏—è —Å –ª—é–±–∏–º—ã–º–∏",
            "üè°": "–û—Ç–Ω–æ—à–µ–Ω–∏—è —Å —Ä–æ–¥–Ω—ã–º–∏",
            "ü§ù": "–î—Ä—É–∑—å—è",
            "üíº": "–ö–∞—Ä—å–µ—Ä–∞",
            "‚ôÇÔ∏è": "–§–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ",
            "üß†": "–ú–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ",
            "üé®": "–•–æ–±–±–∏ –∏ —É–≤–ª–µ—á–µ–Ω–∏—è",
            "üí∞": "–ë–ª–∞–≥–æ—Å–æ—Å—Ç–æ—è–Ω–∏–µ",
        }

        self._normalized_spheres: Dict[str, str] = {
            "love": "–û—Ç–Ω–æ—à–µ–Ω–∏—è —Å –ª—é–±–∏–º—ã–º–∏",
            "family": "–û—Ç–Ω–æ—à–µ–Ω–∏—è —Å —Ä–æ–¥–Ω—ã–º–∏",
            "friends": "–î—Ä—É–∑—å—è",
            "career": "–ö–∞—Ä—å–µ—Ä–∞",
            "physical": "–§–∏–∑–∏—á–µ—Å–∫–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ",
            "mental": "–ú–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ",
            "hobby": "–•–æ–±–±–∏ –∏ —É–≤–ª–µ—á–µ–Ω–∏—è",
            "wealth": "–ë–ª–∞–≥–æ—Å–æ—Å—Ç–æ—è–Ω–∏–µ",
        }

    def get_all_emojis(self) -> Dict[str, str]:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –≤—Å–µ—Ö —ç–º–æ–¥–∑–∏ –∏ –∏—Ö —Å—Ñ–µ—Ä.

        Returns:
            –°–ª–æ–≤–∞—Ä—å {—ç–º–æ–¥–∑–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ_—Å—Ñ–µ—Ä—ã}
        """
        return self._sphere_emojis

    def get_emoji(self, sphere: str) -> str:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–º–æ–¥–∑–∏ –¥–ª—è —Å—Ñ–µ—Ä—ã.

        Args:
            sphere: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã

        Returns:
            –≠–º–æ–¥–∑–∏ —Å—Ñ–µ—Ä—ã –∏–ª–∏ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
        """
        for emoji, name in self._sphere_emojis.items():
            if name == sphere:
                return emoji
        return ""

    def get_sphere_by_emoji(self, emoji: str) -> Optional[str]:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã –ø–æ —ç–º–æ–¥–∑–∏.

        Args:
            emoji: –≠–º–æ–¥–∑–∏ —Å—Ñ–µ—Ä—ã

        Returns:
            –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã –∏–ª–∏ None, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        """
        return self._sphere_emojis.get(emoji)

    def get_emoji_by_sphere(self, sphere: str) -> Optional[str]:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–º–æ–¥–∑–∏ –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–π —Å—Ñ–µ—Ä—ã.

        Args:
            sphere: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã

        Returns:
            –≠–º–æ–¥–∑–∏ —Å—Ñ–µ—Ä—ã –∏–ª–∏ None, –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
        """
        for emoji, name in self._sphere_emojis.items():
            if name == sphere:
                return emoji
        return None

    def normalize(self, sphere: str) -> str:
        """
        –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã.

        Args:
            sphere: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã

        Returns:
            –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—Ñ–µ—Ä—ã
        """
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä—è–º–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        if sphere in self._normalized_spheres.values():
            return sphere

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –∫–ª—é—á—É
        if sphere in self._normalized_spheres:
            return self._normalized_spheres[sphere]

        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å
        return sphere
